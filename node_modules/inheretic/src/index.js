#!/usr/bin/env node
const fs = require('fs');

const debugWriter = (fileName, contents) => {
    console.log(`DEBUG: not writing what follows to "${fileName}":\n`, contents);
};

const program = require('caporal');
program
  .version('0.0.1')
  .argument('<dir>', 'Directory to create/update package.json files with parents.')
  .argument('[template-name]', 'Name of package.json template files.', /.*$/, 'package.json')
  .option('--report-only', 'Do not write package.json files - instead print them to stdout.')
  .action((args, options, logger) => {
    require('./inherit')(args.dir, options.reportOnly ? debugWriter : fs.writeFileSync, args.templateName);
  });
program.parse(process.argv);